{"ast":null,"code":"function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar React = require('react');\n\nvar PropTypes = require('prop-types');\n\nvar faviconSize = 16;\nvar linkEl;\n\nfunction drawIcon(_ref) {\n  var src = _ref.url,\n      num = _ref.alertCount,\n      cb = _ref.callback,\n      renderOverlay = _ref.renderOverlay;\n  var img = document.createElement('img');\n  img.crossOrigin = 'Anonymous';\n\n  img.onload = function () {\n    var canvas = document.createElement('canvas');\n    canvas.width = faviconSize;\n    canvas.height = faviconSize;\n    var context = canvas.getContext('2d');\n    context.clearRect(0, 0, img.width, img.height);\n    context.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n    if (num) {\n      var top = canvas.height - 9;\n      var left = canvas.width - 7 - 1;\n      var bottom = faviconSize;\n      var right = faviconSize;\n      var radius = 2;\n      context.fillStyle = '#F03D25';\n      context.strokeStyle = '#F03D25';\n      context.lineWidth = 1;\n      context.beginPath();\n      context.moveTo(left + radius, top);\n      context.quadraticCurveTo(left, top, left, top + radius);\n      context.lineTo(left, bottom - radius);\n      context.quadraticCurveTo(left, bottom, left + radius, bottom);\n      context.lineTo(right - radius, bottom);\n      context.quadraticCurveTo(right, bottom, right, bottom - radius);\n      context.lineTo(right, top + radius);\n      context.quadraticCurveTo(right, top, right - radius, top);\n      context.closePath();\n      context.fill();\n      context.font = 'bold 10px arial';\n      context.fillStyle = '#FFF';\n      context.textAlign = 'right';\n      context.textBaseline = 'top';\n      context.fillText(num, 15, 6);\n    }\n\n    if (renderOverlay) {\n      renderOverlay(canvas, context);\n    }\n\n    cb(null, context.canvas.toDataURL());\n  };\n\n  img.src = src;\n}\n\nvar Favicon = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Favicon, _React$Component);\n\n  function Favicon() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      animationIndex: 0,\n      animationLoop: null,\n      animationRunning: false\n    };\n    return _this;\n  }\n\n  Favicon.getActiveInstance = function getActiveInstance() {\n    return Favicon.mountedInstances[Favicon.mountedInstances.length - 1];\n  };\n\n  Favicon.draw = function draw() {\n    if (typeof document === 'undefined') return;\n    var activeInstance = Favicon.getActiveInstance();\n\n    if (typeof linkEl === 'undefined') {\n      var head = document.getElementsByTagName('head')[0];\n      linkEl = document.createElement('link');\n      linkEl.type = 'image/x-icon';\n      linkEl.rel = 'icon';\n      var links = head.getElementsByTagName('link');\n\n      for (var i = links.length; --i >= 0;) {\n        if (/\\bicon\\b/i.test(links[i].getAttribute('rel')) && !activeInstance.props.keepIconLink(links[i])) {\n          head.removeChild(links[i]);\n        }\n      }\n\n      head.appendChild(linkEl);\n    }\n\n    var currentUrl;\n\n    if (activeInstance.props.url instanceof Array) {\n      currentUrl = activeInstance.props.url[activeInstance.state.animationIndex];\n    } else {\n      currentUrl = activeInstance.props.url;\n    }\n\n    if (activeInstance.props.alertCount || activeInstance.props.renderOverlay) {\n      drawIcon({\n        alertCount: activeInstance.props.alertCount,\n        callback: function callback(_, url) {\n          linkEl.href = url;\n        },\n        renderOverlay: activeInstance.props.renderOverlay,\n        url: currentUrl\n      });\n    } else {\n      linkEl.href = currentUrl;\n    }\n  };\n\n  Favicon.update = function update() {\n    if (typeof document === 'undefined') return;\n    var activeInstance = Favicon.getActiveInstance();\n    var isAnimated = activeInstance.props.url instanceof Array && activeInstance.props.animated;\n    var intervalId = null;\n    clearInterval(activeInstance.state.animationLoop);\n\n    if (isAnimated) {\n      var animateFavicon = function animateFavicon() {\n        var nextAnimationIndex = (activeInstance.state.animationIndex + 1) % activeInstance.props.url.length;\n        Favicon.draw();\n        activeInstance.setState({\n          animationIndex: nextAnimationIndex\n        });\n      };\n\n      intervalId = setInterval(animateFavicon, activeInstance.props.animationDelay);\n      animateFavicon();\n    } else {\n      Favicon.draw();\n    }\n\n    activeInstance.setState({\n      animationLoop: intervalId\n    });\n  };\n\n  var _proto = Favicon.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    Favicon.mountedInstances.push(this);\n    Favicon.update();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    var activeInstance = Favicon.getActiveInstance();\n    clearInterval(activeInstance.state.animationLoop);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (prevProps.url === this.props.url && prevProps.animated === this.props.animated && prevProps.alertCount === this.props.alertCount && prevProps.renderOverlay === this.props.renderOverlay && prevProps.keepIconLink === this.props.keepIconLink) return;\n    Favicon.update();\n  };\n\n  _proto.render = function render() {\n    return null;\n  };\n\n  return Favicon;\n}(React.Component);\n\nFavicon.displayName = 'Favicon';\nFavicon.mountedInstances = [];\nFavicon.defaultProps = {\n  alertCount: null,\n  animated: true,\n  animationDelay: 500,\n  keepIconLink: function keepIconLink() {\n    return false;\n  },\n  renderOverlay: null,\n  url: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.string), PropTypes.string]).isRequired\n};\nFavicon.propTypes = {\n  alertCount: PropTypes.number,\n  animated: PropTypes.bool,\n  animationDelay: PropTypes.number,\n  keepIconLink: PropTypes.func,\n  renderOverlay: PropTypes.func\n};\nmodule.exports = Favicon;","map":{"version":3,"sources":["../src/index.js"],"names":["React","require","PropTypes","faviconSize","url","src","alertCount","num","callback","cb","renderOverlay","img","document","canvas","context","top","left","bottom","right","radius","Favicon","Component","displayName","mountedInstances","getActiveInstance","draw","activeInstance","head","linkEl","links","i","currentUrl","drawIcon","update","isAnimated","intervalId","clearInterval","animateFavicon","nextAnimationIndex","animationIndex","setInterval","animationLoop","state","animationRunning","componentDidMount","componentWillUnmount","componentDidUpdate","prevProps","render","animated","animationDelay","keepIconLink","isRequired","func","module"],"mappings":"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","sourcesContent":["'use strict'\n\nconst React = require('react')\nconst PropTypes = require('prop-types')\n\nconst faviconSize = 16\nlet linkEl\n\nfunction drawIcon({ url: src, alertCount: num, callback: cb, renderOverlay }) {\n  const img = document.createElement('img')\n  img.crossOrigin = 'Anonymous'\n  img.onload = function () {\n    const canvas = document.createElement('canvas')\n    canvas.width = faviconSize\n    canvas.height = faviconSize\n\n    const context = canvas.getContext('2d')\n    context.clearRect(0, 0, img.width, img.height)\n    context.drawImage(img, 0, 0, canvas.width, canvas.height)\n\n    if (num) {\n      const top = canvas.height - 9\n      const left = canvas.width - 7 - 1\n      const bottom = faviconSize\n      const right = faviconSize\n      const radius = 2\n\n      context.fillStyle = '#F03D25'\n      context.strokeStyle = '#F03D25'\n      context.lineWidth = 1\n\n      context.beginPath()\n      context.moveTo(left + radius, top)\n      context.quadraticCurveTo(left, top, left, top + radius)\n      context.lineTo(left, bottom - radius)\n      context.quadraticCurveTo(left, bottom, left + radius, bottom)\n      context.lineTo(right - radius, bottom)\n      context.quadraticCurveTo(right, bottom, right, bottom - radius)\n      context.lineTo(right, top + radius)\n      context.quadraticCurveTo(right, top, right - radius, top)\n      context.closePath()\n      context.fill()\n\n      context.font = 'bold 10px arial'\n      context.fillStyle = '#FFF'\n      context.textAlign = 'right'\n      context.textBaseline = 'top'\n      context.fillText(num, 15, 6)\n    }\n    if (renderOverlay) {\n      renderOverlay(canvas, context)\n    }\n\n    cb(null, context.canvas.toDataURL())\n  }\n  img.src = src\n}\n\nclass Favicon extends React.Component {\n  static displayName = 'Favicon'\n\n  static mountedInstances = []\n\n  static getActiveInstance() {\n    return Favicon.mountedInstances[Favicon.mountedInstances.length - 1]\n  }\n\n  static draw() {\n    if (typeof document === 'undefined') return\n\n    var activeInstance = Favicon.getActiveInstance()\n    if (typeof linkEl === 'undefined') {\n      var head = document.getElementsByTagName('head')[0]\n      linkEl = document.createElement('link')\n      linkEl.type = 'image/x-icon'\n      linkEl.rel = 'icon'\n\n      // remove existing favicons\n      var links = head.getElementsByTagName('link')\n      for (var i = links.length; --i >= 0; ) {\n        if (\n          /\\bicon\\b/i.test(links[i].getAttribute('rel')) &&\n          !activeInstance.props.keepIconLink(links[i])\n        ) {\n          head.removeChild(links[i])\n        }\n      }\n\n      head.appendChild(linkEl)\n    }\n\n    var currentUrl\n\n    if (activeInstance.props.url instanceof Array) {\n      currentUrl = activeInstance.props.url[activeInstance.state.animationIndex]\n    } else {\n      currentUrl = activeInstance.props.url\n    }\n\n    if (activeInstance.props.alertCount || activeInstance.props.renderOverlay) {\n      drawIcon({\n        alertCount: activeInstance.props.alertCount,\n        callback: (_, url) => {\n          linkEl.href = url\n        },\n        renderOverlay: activeInstance.props.renderOverlay,\n        url: currentUrl,\n      })\n    } else {\n      linkEl.href = currentUrl\n    }\n  }\n\n  static update() {\n    if (typeof document === 'undefined') return\n\n    var activeInstance = Favicon.getActiveInstance()\n    var isAnimated =\n      activeInstance.props.url instanceof Array && activeInstance.props.animated\n\n    // clear any running animations\n    var intervalId = null\n    clearInterval(activeInstance.state.animationLoop)\n\n    if (isAnimated) {\n      var animateFavicon = function animateFavicon() {\n        var nextAnimationIndex =\n          (activeInstance.state.animationIndex + 1) %\n          activeInstance.props.url.length\n        Favicon.draw()\n        activeInstance.setState({ animationIndex: nextAnimationIndex })\n      }\n      intervalId = setInterval(\n        animateFavicon,\n        activeInstance.props.animationDelay\n      )\n      animateFavicon()\n    } else {\n      Favicon.draw()\n    }\n\n    activeInstance.setState({ animationLoop: intervalId })\n  }\n\n  state = {\n    animationIndex: 0,\n    animationLoop: null,\n    animationRunning: false,\n  }\n\n  componentDidMount() {\n    Favicon.mountedInstances.push(this)\n    Favicon.update()\n  }\n\n  componentWillUnmount() {\n    var activeInstance = Favicon.getActiveInstance()\n    clearInterval(activeInstance.state.animationLoop)\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.url === this.props.url &&\n      prevProps.animated === this.props.animated &&\n      prevProps.alertCount === this.props.alertCount &&\n      prevProps.renderOverlay === this.props.renderOverlay &&\n      prevProps.keepIconLink === this.props.keepIconLink\n    )\n      return\n\n    Favicon.update()\n  }\n\n  render() {\n    return null\n  }\n}\n\nFavicon.defaultProps = {\n  alertCount: null,\n  animated: true,\n  animationDelay: 500,\n  keepIconLink: () => false,\n  renderOverlay: null,\n  url: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.string),\n    PropTypes.string,\n  ]).isRequired,\n}\n\nFavicon.propTypes = {\n  alertCount: PropTypes.number,\n  animated: PropTypes.bool,\n  animationDelay: PropTypes.number,\n  keepIconLink: PropTypes.func,\n  renderOverlay: PropTypes.func,\n}\n\nmodule.exports = Favicon\n"]},"metadata":{},"sourceType":"script"}